(()=>{var e=document.getElementById("edit-profile-btn"),t=document.getElementById("modal-overlay"),n=document.getElementById("edit-profile-modal"),i=document.getElementById("close-modal-btn"),d=(document.getElementById("save-profile-btn"),document.getElementById("profile-name")),o=document.getElementById("profile-location"),l=document.getElementById("profile-bio"),a=document.getElementById("profile-skills"),s=document.getElementById("profile-pic"),c=document.getElementById("edit-name"),r=document.getElementById("edit-location"),m=document.getElementById("edit-bio"),u=document.getElementById("edit-skills"),f=document.getElementById("edit-profile-pic"),p=document.getElementById("profile-pic-url");function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=document.createElement("div");n.className="notification ".concat(t),n.textContent=e,document.body.appendChild(n),setTimeout((function(){n.remove()}),3e3)}p.addEventListener("input",(function(e){this.value&&(f.value="")})),f.addEventListener("change",(function(e){this.files.length>0&&(p.value="")})),e.addEventListener("click",(function(){t.classList.remove("hidden"),n.classList.remove("hidden"),c.value=d.textContent,r.value=o.textContent,m.value=l.textContent,u.value=Array.from(a.children).map((function(e){return e.textContent})).join(", ")})),i.addEventListener("click",(function(){t.classList.add("hidden"),n.classList.add("hidden")})),t.addEventListener("click",(function(){t.classList.add("hidden"),n.classList.add("hidden")})),document.getElementById("edit-profile-form").addEventListener("submit",(function(e){e.preventDefault();var i=this,s=new FormData(i),c=i.querySelector('button[type="submit"]');c.innerHTML='<i class="fas fa-spinner fa-spin"></i> Saving...',c.disabled=!0,fetch(i.action,{method:"POST",body:s,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"X-HTTP-Method-Override":"PUT"},credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){if(!e.success)throw new Error(e.message||"Failed to update profile");!function(e){d.textContent=e.get("name"),o.textContent=e.get("location"),l.textContent=e.get("bio");var t=e.get("skills").split(",").map((function(e){return e.trim()}));a.innerHTML="",t.forEach((function(e){var t=document.createElement("li");t.textContent=e,a.appendChild(t)}))}(s),t.classList.add("hidden"),n.classList.add("hidden"),v("Profile updated successfully!","success")})).catch((function(e){console.error("Error:",e),v(e.message||"Failed to update profile","error")})).finally((function(){c.innerHTML='<i class="fas fa-save"></i> Save Changes',c.disabled=!1}))})),f.addEventListener("change",(function(e){if(this.files&&this.files[0]){var t=new FileReader;t.onload=function(e){if(s.classList.contains("profile-icon")){s.classList.remove("profile-icon"),s.innerHTML="";var t=document.createElement("img");t.src=e.target.result,t.classList.add("profile-pic"),s.parentNode.replaceChild(t,s)}else s.src=e.target.result},t.readAsDataURL(this.files[0])}}))})();